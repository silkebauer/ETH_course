<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 17 Exercise: Survival estimation | Handout and background material for ETHZ course ‘Animal Migration and research in field ornithology’</title>
  <meta name="description" content="This is a handout for the ETH migration course at Col de Bretolet." />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 17 Exercise: Survival estimation | Handout and background material for ETHZ course ‘Animal Migration and research in field ornithology’" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a handout for the ETH migration course at Col de Bretolet." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 17 Exercise: Survival estimation | Handout and background material for ETHZ course ‘Animal Migration and research in field ornithology’" />
  
  <meta name="twitter:description" content="This is a handout for the ETH migration course at Col de Bretolet." />
  

<meta name="author" content="Silke Bauer &amp; Fränzi Korner-Nievergelt" />


<meta name="date" content="2025-09-04" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="exctiming.html"/>
<link rel="next" href="excmigmodel.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Handout ETH course Migration ecology and methods in field ornithology</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> General information</a></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#course-aims"><i class="fa fa-check"></i><b>2.1</b> Course aims</a></li>
<li class="chapter" data-level="2.2" data-path="introduction.html"><a href="introduction.html#course-schedule"><i class="fa fa-check"></i><b>2.2</b> Course schedule</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="16-ExercisesSurvival.html"><a href="#prepatory-days-2-5-september-2025-at-swiss-ornithological-institute-sempach-and-eth-z%C3%BCrich"><i class="fa fa-check"></i><b>2.2.1</b> Prepatory days: 2-5 September 2025 at Swiss Ornithological Institute Sempach and ETH Zürich</a></li>
<li class="chapter" data-level="2.2.2" data-path="introduction.html"><a href="introduction.html#course-day-1-tuesday-2-september-2025-in-sempach"><i class="fa fa-check"></i><b>2.2.2</b> Course day 1: Tuesday, 2 September 2025 in Sempach</a></li>
<li class="chapter" data-level="2.2.3" data-path="introduction.html"><a href="introduction.html#course-day-2-wednesday-3-september-2025"><i class="fa fa-check"></i><b>2.2.3</b> Course day 2: Wednesday, 3 September 2025</a></li>
<li class="chapter" data-level="2.2.4" data-path="introduction.html"><a href="introduction.html#course-day-3-thursday-4-september-2025"><i class="fa fa-check"></i><b>2.2.4</b> Course day 3: Thursday, 4 September 2025</a></li>
<li class="chapter" data-level="2.2.5" data-path="introduction.html"><a href="introduction.html#course-day-4-friday-5-september-2025"><i class="fa fa-check"></i><b>2.2.5</b> Course day 4: Friday, 5 September 2025</a></li>
<li class="chapter" data-level="2.2.6" data-path="introduction.html"><a href="introduction.html#excursion-to-col-de-bretolet-mon-fri-8-12-september-2025"><i class="fa fa-check"></i><b>2.2.6</b> Excursion to Col de Bretolet: Mon-Fri 8-12 September 2025</a></li>
<li class="chapter" data-level="2.2.7" data-path="introduction.html"><a href="introduction.html#course-day-5-monday-8-september-2024"><i class="fa fa-check"></i><b>2.2.7</b> Course day 5: Monday, 8 September 2024</a></li>
<li class="chapter" data-level="2.2.8" data-path="introduction.html"><a href="introduction.html#course-day-6-tuesday-9-september-2025"><i class="fa fa-check"></i><b>2.2.8</b> Course day 6: Tuesday, 9 September 2025</a></li>
<li class="chapter" data-level="2.2.9" data-path="introduction.html"><a href="introduction.html#course-day-6-wednesday-10-september-2025"><i class="fa fa-check"></i><b>2.2.9</b> Course day 6: Wednesday, 10 September 2025</a></li>
<li class="chapter" data-level="2.2.10" data-path="introduction.html"><a href="introduction.html#course-day-7-thursday-11-september-2025"><i class="fa fa-check"></i><b>2.2.10</b> Course day 7: Thursday, 11 September 2025</a></li>
<li class="chapter" data-level="2.2.11" data-path="introduction.html"><a href="introduction.html#course-day-8-friday-12-september-2025"><i class="fa fa-check"></i><b>2.2.11</b> Course day 8: Friday, 12 September 2025</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="introduction.html"><a href="introduction.html#preparations"><i class="fa fa-check"></i><b>2.3</b> Preparations</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="animal-migration.html"><a href="animal-migration.html"><i class="fa fa-check"></i><b>3</b> Animal migration</a>
<ul>
<li class="chapter" data-level="3.1" data-path="animal-migration.html"><a href="animal-migration.html#what-is-migration"><i class="fa fa-check"></i><b>3.1</b> What is migration?</a></li>
<li class="chapter" data-level="3.2" data-path="animal-migration.html"><a href="animal-migration.html#why-do-birds-migrate"><i class="fa fa-check"></i><b>3.2</b> Why do birds migrate?</a></li>
<li class="chapter" data-level="3.3" data-path="animal-migration.html"><a href="animal-migration.html#terminology-of-specific-migration-patterns"><i class="fa fa-check"></i><b>3.3</b> Terminology of specific migration patterns</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="animal-migration.html"><a href="animal-migration.html#characterisation-of-migration-according-to-distances-covered"><i class="fa fa-check"></i><b>3.3.1</b> Characterisation of migration according to distances covered</a></li>
<li class="chapter" data-level="3.3.2" data-path="animal-migration.html"><a href="animal-migration.html#characterisation-of-migration-according-to-daytime-of-travel"><i class="fa fa-check"></i><b>3.3.2</b> Characterisation of migration according to daytime of travel</a></li>
<li class="chapter" data-level="3.3.3" data-path="animal-migration.html"><a href="animal-migration.html#characterisation-of-migration-according-to-larger-scale-patterns-of-migratory-bouts"><i class="fa fa-check"></i><b>3.3.3</b> Characterisation of migration according to larger-scale patterns of migratory bouts</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="timing-of-migration.html"><a href="timing-of-migration.html"><i class="fa fa-check"></i><b>4</b> Timing of migration</a>
<ul>
<li class="chapter" data-level="4.1" data-path="timing-of-migration.html"><a href="timing-of-migration.html#why-is-timing-important"><i class="fa fa-check"></i><b>4.1</b> Why is timing important?</a></li>
<li class="chapter" data-level="4.2" data-path="timing-of-migration.html"><a href="timing-of-migration.html#what-determines-the-timing-of-migratory-steps-cues"><i class="fa fa-check"></i><b>4.2</b> What determines the timing of migratory steps? Cues!</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="timing-of-migration.html"><a href="timing-of-migration.html#preparation"><i class="fa fa-check"></i><b>4.2.1</b> Preparation</a></li>
<li class="chapter" data-level="4.2.2" data-path="timing-of-migration.html"><a href="timing-of-migration.html#departure"><i class="fa fa-check"></i><b>4.2.2</b> Departure</a></li>
<li class="chapter" data-level="4.2.3" data-path="timing-of-migration.html"><a href="timing-of-migration.html#on-the-way"><i class="fa fa-check"></i><b>4.2.3</b> On the way</a></li>
<li class="chapter" data-level="4.2.4" data-path="timing-of-migration.html"><a href="timing-of-migration.html#termination"><i class="fa fa-check"></i><b>4.2.4</b> Termination</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="timing-of-migration.html"><a href="timing-of-migration.html#consequences-of-migration-timing"><i class="fa fa-check"></i><b>4.3</b> Consequences of migration timing</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="orientation-and-navigation.html"><a href="orientation-and-navigation.html"><i class="fa fa-check"></i><b>5</b> Orientation and Navigation</a>
<ul>
<li class="chapter" data-level="5.1" data-path="orientation-and-navigation.html"><a href="orientation-and-navigation.html#sun-compass"><i class="fa fa-check"></i><b>5.1</b> Sun compass</a></li>
<li class="chapter" data-level="5.2" data-path="orientation-and-navigation.html"><a href="orientation-and-navigation.html#star-compass"><i class="fa fa-check"></i><b>5.2</b> Star compass</a></li>
<li class="chapter" data-level="5.3" data-path="orientation-and-navigation.html"><a href="orientation-and-navigation.html#magnetic-compass"><i class="fa fa-check"></i><b>5.3</b> Magnetic compass</a></li>
<li class="chapter" data-level="5.4" data-path="orientation-and-navigation.html"><a href="orientation-and-navigation.html#landmarks"><i class="fa fa-check"></i><b>5.4</b> Landmarks</a></li>
<li class="chapter" data-level="5.5" data-path="orientation-and-navigation.html"><a href="orientation-and-navigation.html#olfactory-cues"><i class="fa fa-check"></i><b>5.5</b> Olfactory cues</a></li>
<li class="chapter" data-level="5.6" data-path="orientation-and-navigation.html"><a href="orientation-and-navigation.html#compass-orientation-vs.-navigation"><i class="fa fa-check"></i><b>5.6</b> Compass orientation vs. navigation</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="flight-energetics-and-plasticity-of-the-migratory-flight.html"><a href="flight-energetics-and-plasticity-of-the-migratory-flight.html"><i class="fa fa-check"></i><b>6</b> Flight energetics and plasticity of the migratory flight</a>
<ul>
<li class="chapter" data-level="6.1" data-path="flight-energetics-and-plasticity-of-the-migratory-flight.html"><a href="flight-energetics-and-plasticity-of-the-migratory-flight.html#mechanics-and-energetics-of-flight"><i class="fa fa-check"></i><b>6.1</b> Mechanics and energetics of flight</a></li>
<li class="chapter" data-level="6.2" data-path="flight-energetics-and-plasticity-of-the-migratory-flight.html"><a href="flight-energetics-and-plasticity-of-the-migratory-flight.html#fuel-for-migratory-flights"><i class="fa fa-check"></i><b>6.2</b> Fuel for migratory flights</a></li>
<li class="chapter" data-level="6.3" data-path="flight-energetics-and-plasticity-of-the-migratory-flight.html"><a href="flight-energetics-and-plasticity-of-the-migratory-flight.html#influences-on-migration"><i class="fa fa-check"></i><b>6.3</b> Influences on migration</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="flight-energetics-and-plasticity-of-the-migratory-flight.html"><a href="flight-energetics-and-plasticity-of-the-migratory-flight.html#endogeneous-and-exogeneous-factors"><i class="fa fa-check"></i><b>6.3.1</b> Endogeneous and exogeneous factors</a></li>
<li class="chapter" data-level="6.3.2" data-path="flight-energetics-and-plasticity-of-the-migratory-flight.html"><a href="flight-energetics-and-plasticity-of-the-migratory-flight.html#topography"><i class="fa fa-check"></i><b>6.3.2</b> Topography</a></li>
<li class="chapter" data-level="6.3.3" data-path="flight-energetics-and-plasticity-of-the-migratory-flight.html"><a href="flight-energetics-and-plasticity-of-the-migratory-flight.html#wind"><i class="fa fa-check"></i><b>6.3.3</b> Wind</a></li>
<li class="chapter" data-level="6.3.4" data-path="flight-energetics-and-plasticity-of-the-migratory-flight.html"><a href="flight-energetics-and-plasticity-of-the-migratory-flight.html#temperature"><i class="fa fa-check"></i><b>6.3.4</b> Temperature</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="importance-of-migration-for-the-structure-and-dynamics-of-resident-communities.html"><a href="importance-of-migration-for-the-structure-and-dynamics-of-resident-communities.html"><i class="fa fa-check"></i><b>7</b> Importance of migration for the structure and dynamics of resident communities</a>
<ul>
<li class="chapter" data-level="7.1" data-path="importance-of-migration-for-the-structure-and-dynamics-of-resident-communities.html"><a href="importance-of-migration-for-the-structure-and-dynamics-of-resident-communities.html#migrants-link-ecological-communities-and-ecosystem-functioning-worldwide"><i class="fa fa-check"></i><b>7.1</b> Migrants link ecological communities and ecosystem functioning worldwide</a></li>
<li class="chapter" data-level="7.2" data-path="importance-of-migration-for-the-structure-and-dynamics-of-resident-communities.html"><a href="importance-of-migration-for-the-structure-and-dynamics-of-resident-communities.html#animal-migrations-provide-services-and-disservices"><i class="fa fa-check"></i><b>7.2</b> Animal migrations provide services and disservices</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="global-change-and-other-challenges.html"><a href="global-change-and-other-challenges.html"><i class="fa fa-check"></i><b>8</b> Global change and other challenges</a>
<ul>
<li class="chapter" data-level="8.1" data-path="global-change-and-other-challenges.html"><a href="global-change-and-other-challenges.html#climate-change"><i class="fa fa-check"></i><b>8.1</b> Climate change</a></li>
<li class="chapter" data-level="8.2" data-path="global-change-and-other-challenges.html"><a href="global-change-and-other-challenges.html#sensory-pollution"><i class="fa fa-check"></i><b>8.2</b> Sensory pollution</a></li>
<li class="chapter" data-level="8.3" data-path="global-change-and-other-challenges.html"><a href="global-change-and-other-challenges.html#man-made-structures"><i class="fa fa-check"></i><b>8.3</b> Man-made structures</a></li>
<li class="chapter" data-level="8.4" data-path="global-change-and-other-challenges.html"><a href="global-change-and-other-challenges.html#conservation-of-migrants-and-migrations"><i class="fa fa-check"></i><b>8.4</b> Conservation of migrants and migrations</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="field-methods.html"><a href="field-methods.html"><i class="fa fa-check"></i><b>9</b> Field methods</a>
<ul>
<li class="chapter" data-level="9.1" data-path="field-methods.html"><a href="field-methods.html#observations-visual-moonwatching-ir-radar"><i class="fa fa-check"></i><b>9.1</b> Observations: visual, moonwatching, IR, radar</a></li>
<li class="chapter" data-level="9.2" data-path="field-methods.html"><a href="field-methods.html#marking-and-reencountering"><i class="fa fa-check"></i><b>9.2</b> Marking and reencountering</a></li>
<li class="chapter" data-level="9.3" data-path="field-methods.html"><a href="field-methods.html#tracking-individuals"><i class="fa fa-check"></i><b>9.3</b> Tracking individuals</a></li>
<li class="chapter" data-level="9.4" data-path="field-methods.html"><a href="field-methods.html#orientation-experiments"><i class="fa fa-check"></i><b>9.4</b> Orientation experiments</a></li>
<li class="chapter" data-level="9.5" data-path="field-methods.html"><a href="field-methods.html#stable-isotopes-genetics-and-physiology"><i class="fa fa-check"></i><b>9.5</b> Stable isotopes, genetics and physiology</a></li>
<li class="chapter" data-level="9.6" data-path="field-methods.html"><a href="field-methods.html#references"><i class="fa fa-check"></i><b>9.6</b> References</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="migration-models.html"><a href="migration-models.html"><i class="fa fa-check"></i><b>10</b> Migration models</a>
<ul>
<li class="chapter" data-level="10.1" data-path="migration-models.html"><a href="migration-models.html#state-dependent-migration-models"><i class="fa fa-check"></i><b>10.1</b> State-dependent migration models</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="statistical-tools-for-studying-migration.html"><a href="statistical-tools-for-studying-migration.html"><i class="fa fa-check"></i><b>11</b> Statistical tools for studying migration</a>
<ul>
<li class="chapter" data-level="11.1" data-path="statistical-tools-for-studying-migration.html"><a href="statistical-tools-for-studying-migration.html#linear-models"><i class="fa fa-check"></i><b>11.1</b> Linear models</a></li>
<li class="chapter" data-level="11.2" data-path="statistical-tools-for-studying-migration.html"><a href="statistical-tools-for-studying-migration.html#distribution-models-for-counts-of-resting-or-migrating-individuals"><i class="fa fa-check"></i><b>11.2</b> Distribution models for counts of resting or migrating individuals</a></li>
<li class="chapter" data-level="11.3" data-path="statistical-tools-for-studying-migration.html"><a href="statistical-tools-for-studying-migration.html#migratory-connectivity-models"><i class="fa fa-check"></i><b>11.3</b> Migratory connectivity models</a></li>
<li class="chapter" data-level="11.4" data-path="statistical-tools-for-studying-migration.html"><a href="statistical-tools-for-studying-migration.html#estimating-survival-based-on-mark-recapture-data-the-cormack-jolly-seber-model"><i class="fa fa-check"></i><b>11.4</b> Estimating survival based on mark-recapture data: The Cormack-Jolly-Seber model</a></li>
<li class="chapter" data-level="11.5" data-path="statistical-tools-for-studying-migration.html"><a href="statistical-tools-for-studying-migration.html#multi-state-models-to-estimate-movement-rates"><i class="fa fa-check"></i><b>11.5</b> Multi-state models to estimate movement rates</a></li>
<li class="chapter" data-level="11.6" data-path="statistical-tools-for-studying-migration.html"><a href="statistical-tools-for-studying-migration.html#individual-based-hidden-markov-model-for-bird-behaviour"><i class="fa fa-check"></i><b>11.6</b> Individual based hidden Markov model for bird behaviour</a></li>
<li class="chapter" data-level="11.7" data-path="statistical-tools-for-studying-migration.html"><a href="statistical-tools-for-studying-migration.html#the-combination-of-different-data-sources"><i class="fa fa-check"></i><b>11.7</b> The combination of different data sources</a></li>
<li class="chapter" data-level="11.8" data-path="statistical-tools-for-studying-migration.html"><a href="statistical-tools-for-studying-migration.html#references-1"><i class="fa fa-check"></i><b>11.8</b> References</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="StudentProjects.html"><a href="StudentProjects.html"><i class="fa fa-check"></i><b>12</b> Student projects</a>
<ul>
<li class="chapter" data-level="12.1" data-path="StudentProjects.html"><a href="StudentProjects.html#pre-requisite-reading-and-assessing-scientific-publications"><i class="fa fa-check"></i><b>12.1</b> Pre-requisite: Reading and assessing scientific publications</a></li>
<li class="chapter" data-level="12.2" data-path="StudentProjects.html"><a href="StudentProjects.html#student-project-1-phenology---migration-timing-within-the-season-and-their-changes-over-the-years"><i class="fa fa-check"></i><b>12.2</b> Student project 1: Phenology - Migration timing within the season and their changes over the years</a></li>
<li class="chapter" data-level="12.3" data-path="StudentProjects.html"><a href="StudentProjects.html#student-project-2-long-term-changes-in-morphology"><i class="fa fa-check"></i><b>12.3</b> Student project 2: Long-term changes in morphology</a></li>
<li class="chapter" data-level="12.4" data-path="StudentProjects.html"><a href="StudentProjects.html#student-project-3-differential-migration"><i class="fa fa-check"></i><b>12.4</b> Student project 3: Differential Migration</a></li>
<li class="chapter" data-level="12.5" data-path="StudentProjects.html"><a href="StudentProjects.html#student-project-4-flight-energetics-in-the-course-of-a-night-and-over-the-season"><i class="fa fa-check"></i><b>12.5</b> Student project 4: Flight energetics in the course of a night and over the season</a></li>
<li class="chapter" data-level="12.6" data-path="StudentProjects.html"><a href="StudentProjects.html#student-project-5-estimate-survival-from-capture-recapture-data"><i class="fa fa-check"></i><b>12.6</b> Student project 5: Estimate survival from capture-recapture data</a></li>
<li class="chapter" data-level="12.7" data-path="StudentProjects.html"><a href="StudentProjects.html#student-project-6-modelling-spring-migration-several-questions"><i class="fa fa-check"></i><b>12.7</b> Student project 6: Modelling spring migration: several questions</a></li>
<li class="chapter" data-level="12.8" data-path="StudentProjects.html"><a href="StudentProjects.html#student-project-7-estimating-migration-volume"><i class="fa fa-check"></i><b>12.8</b> Student project 7: Estimating Migration volume</a></li>
<li class="chapter" data-level="12.9" data-path="StudentProjects.html"><a href="StudentProjects.html#student-project-8-why-is-timing-in-spring-important"><i class="fa fa-check"></i><b>12.9</b> Student project 8: Why is timing in spring important?</a></li>
<li class="chapter" data-level="12.10" data-path="StudentProjects.html"><a href="StudentProjects.html#student-project-9-geolocation---tracking-small-birds"><i class="fa fa-check"></i><b>12.10</b> Student project 9: Geolocation - tracking small birds</a></li>
<li class="chapter" data-level="12.11" data-path="StudentProjects.html"><a href="StudentProjects.html#references-2"><i class="fa fa-check"></i><b>12.11</b> References</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="refresher.html"><a href="refresher.html"><i class="fa fa-check"></i><b>13</b> Exercise: Refreshing R and linear models</a>
<ul>
<li class="chapter" data-level="13.1" data-path="refresher.html"><a href="refresher.html#refreshing-r"><i class="fa fa-check"></i><b>13.1</b> Refreshing R</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="refresher.html"><a href="refresher.html#software-installation"><i class="fa fa-check"></i><b>13.1.1</b> Software installation</a></li>
<li class="chapter" data-level="13.1.2" data-path="refresher.html"><a href="refresher.html#working-with-r"><i class="fa fa-check"></i><b>13.1.2</b> Working with R</a></li>
<li class="chapter" data-level="13.1.3" data-path="refresher.html"><a href="refresher.html#working-with-rmarkdown"><i class="fa fa-check"></i><b>13.1.3</b> Working with rmarkdown</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="refresher.html"><a href="refresher.html#linear-regression"><i class="fa fa-check"></i><b>13.2</b> Linear regression</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="refresher.html"><a href="refresher.html#theory"><i class="fa fa-check"></i><b>13.2.1</b> Theory</a></li>
<li class="chapter" data-level="13.2.2" data-path="refresher.html"><a href="refresher.html#fitting-a-linear-regression-in-r"><i class="fa fa-check"></i><b>13.2.2</b> Fitting a Linear Regression in R</a></li>
<li class="chapter" data-level="13.2.3" data-path="refresher.html"><a href="refresher.html#data"><i class="fa fa-check"></i><b>13.2.3</b> Data</a></li>
<li class="chapter" data-level="13.2.4" data-path="refresher.html"><a href="refresher.html#fit-the-regression-using-lm"><i class="fa fa-check"></i><b>13.2.4</b> Fit the regression using lm</a></li>
<li class="chapter" data-level="13.2.5" data-path="refresher.html"><a href="refresher.html#check-the-model-assumptions"><i class="fa fa-check"></i><b>13.2.5</b> Check the model assumptions</a></li>
<li class="chapter" data-level="13.2.6" data-path="refresher.html"><a href="refresher.html#drawing-conclusions"><i class="fa fa-check"></i><b>13.2.6</b> Drawing Conclusions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="geolocs.html"><a href="geolocs.html"><i class="fa fa-check"></i><b>14</b> Exercise: Geolocation</a></li>
<li class="chapter" data-level="15" data-path="migcon.html"><a href="migcon.html"><i class="fa fa-check"></i><b>15</b> Exercise: Estimating migratory connectivity</a>
<ul>
<li class="chapter" data-level="15.1" data-path="migcon.html"><a href="migcon.html#background"><i class="fa fa-check"></i><b>15.1</b> Background</a></li>
<li class="chapter" data-level="15.2" data-path="migcon.html"><a href="migcon.html#nightingale-example"><i class="fa fa-check"></i><b>15.2</b> Nightingale example</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="exctiming.html"><a href="exctiming.html"><i class="fa fa-check"></i><b>16</b> Exercise: Timing</a>
<ul>
<li class="chapter" data-level="16.1" data-path="exctiming.html"><a href="exctiming.html#arrival-dates-in-spring"><i class="fa fa-check"></i><b>16.1</b> Arrival dates in spring</a></li>
<li class="chapter" data-level="16.2" data-path="exctiming.html"><a href="exctiming.html#additional-data-and-literature-on-first-arrival-dates"><i class="fa fa-check"></i><b>16.2</b> Additional data and literature on first arrival dates</a></li>
<li class="chapter" data-level="16.3" data-path="exctiming.html"><a href="exctiming.html#timing-of-hatching-dates"><i class="fa fa-check"></i><b>16.3</b> Timing of hatching dates</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="exSurvest.html"><a href="exSurvest.html"><i class="fa fa-check"></i><b>17</b> Exercise: Survival estimation</a>
<ul>
<li class="chapter" data-level="17.1" data-path="exSurvest.html"><a href="exSurvest.html#introduction-to-mark-recapture-modelling"><i class="fa fa-check"></i><b>17.1</b> Introduction to mark-recapture modelling</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="excmigmodel.html"><a href="excmigmodel.html"><i class="fa fa-check"></i><b>18</b> Exercise: Modelling</a>
<ul>
<li class="chapter" data-level="18.1" data-path="excmigmodel.html"><a href="excmigmodel.html#exercises"><i class="fa fa-check"></i><b>18.1</b> Exercises</a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="excmigmodel.html"><a href="excmigmodel.html#change-parameters"><i class="fa fa-check"></i><b>18.1.1</b> Change Parameters</a></li>
<li class="chapter" data-level="18.1.2" data-path="excmigmodel.html"><a href="excmigmodel.html#analyse-resulting-migration-patterns"><i class="fa fa-check"></i><b>18.1.2</b> Analyse resulting migration patterns</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="excmigmodel.html"><a href="excmigmodel.html#code-to-replace-existing-code-in-workflow.r"><i class="fa fa-check"></i><b>18.2</b> Code to replace existing code in “Workflow.R”</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="SemEcosystem.html"><a href="SemEcosystem.html"><i class="fa fa-check"></i><b>19</b> Seminar: Ecosystem Effects of Migrants</a></li>
<li class="divider"></li>
<li><a href="https://github.com/silkebauer/ETH_course" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Handout and background material for ETHZ course ‘Animal Migration and research in field ornithology’</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="exSurvest" class="section level1 hasAnchor" number="17">
<h1><span class="header-section-number">Chapter 17</span> Exercise: Survival estimation<a href="exSurvest.html#exSurvest" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="introduction-to-mark-recapture-modelling" class="section level2 hasAnchor" number="17.1">
<h2><span class="header-section-number">17.1</span> Introduction to mark-recapture modelling<a href="exSurvest.html#introduction-to-mark-recapture-modelling" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Recapture or resightings (reencounters) of marked individuals inform about apparent survival, i.e. the probability that an individual survives and stays in the study area. Apparent survival differs from true survival because when the animals is seen last, it is still alive, i.e. the death is not observed. Thus, if an animal is no longer recaptured or resighted, we do not know whether it moved out of the study area or whether it died. Mark-recapture modelling techniques are designed to separately estimate recapture/resighting probability and apparent survival. To do so, they separate the observation process (recapturing or resighting an animal) from the biological process (staying in the study area and surviving). The basis for the development of an immense diversity of mark-recapture models has been set by the Cormack-Jolly-Seber model <span class="citation">(<a href="#ref-Cormack.1964">Cormack 1964</a>; <a href="#ref-Jolly.1965">Jolly 1965</a>; <a href="#ref-Seber.1965">Seber 1965</a>)</span>. The CJS-model is introduced here using data on Snowfinches, a high alpine bird species that we study since 2015.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="exSurvest.html#cb41-1" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;data/annualCRdata.rda&quot;</span>) <span class="co"># load datax object</span></span></code></pre></div>
<p>Since 2015, we individually marked 1310 Snowfinches. We systematically observed Snowfinches to read rings using scopes and cameras. We could resight 529 of the marked individuals in later years, many of them in more than one year. We collated the marking and resighting data in a capture history matrix <span class="math inline">\(y\)</span>. Each row of <span class="math inline">\(y\)</span> contains the capture history of one individual and each column corresponds to a year from 2015 to 2023. A <span class="math inline">\(1\)</span> indicates that the individual was resighted or recaptured during that year and a <span class="math inline">\(0\)</span> indicates that the individual has not been seen. Thus, a <span class="math inline">\(1\)</span> means the individual is alive in the study area and it has been detected by the researchers. A <span class="math inline">\(0\)</span> could mean that the individual died, that it emigrated from the study area or that it is still alive in the study area but has not been detected by the researchers.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="exSurvest.html#cb42-1" tabindex="-1"></a>index <span class="ot">&lt;-</span> <span class="fu">order</span>(datax<span class="sc">$</span>first)</span>
<span id="cb42-2"><a href="exSurvest.html#cb42-2" tabindex="-1"></a>ch <span class="ot">&lt;-</span> datax<span class="sc">$</span>y[index,]</span>
<span id="cb42-3"><a href="exSurvest.html#cb42-3" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">c</span>(<span class="dv">1</span>,datax<span class="sc">$</span>nocc), <span class="fu">c</span>(<span class="dv">1</span>, datax<span class="sc">$</span>nind), <span class="at">type=</span><span class="st">&quot;n&quot;</span>, <span class="at">axes=</span><span class="cn">FALSE</span>, <span class="at">xlab=</span><span class="st">&quot;Yeaer&quot;</span>, <span class="at">ylab=</span><span class="st">&quot;Individual&quot;</span>)</span>
<span id="cb42-4"><a href="exSurvest.html#cb42-4" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">1</span>, <span class="at">at=</span><span class="dv">1</span><span class="sc">:</span>datax<span class="sc">$</span>nocc)</span>
<span id="cb42-5"><a href="exSurvest.html#cb42-5" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">2</span>, <span class="at">at=</span><span class="dv">1</span><span class="sc">:</span>datax<span class="sc">$</span>nind, <span class="at">las=</span><span class="dv">1</span>, <span class="at">cex.lab=</span><span class="fl">0.5</span>)</span>
<span id="cb42-6"><a href="exSurvest.html#cb42-6" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>datax<span class="sc">$</span>nind){</span>
<span id="cb42-7"><a href="exSurvest.html#cb42-7" tabindex="-1"></a>  <span class="fu">points</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span>datax<span class="sc">$</span>nocc)[ch[i,]<span class="sc">==</span><span class="dv">1</span>], <span class="fu">rep</span>(i,<span class="fu">sum</span>(ch[i,])), <span class="at">cex=</span>.<span class="dv">6</span>) </span>
<span id="cb42-8"><a href="exSurvest.html#cb42-8" tabindex="-1"></a>  <span class="fu">lines</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span>datax<span class="sc">$</span>nocc)[ch[i,]<span class="sc">==</span><span class="dv">1</span>], <span class="fu">rep</span>(i,<span class="fu">sum</span>(ch[i,])))</span>
<span id="cb42-9"><a href="exSurvest.html#cb42-9" tabindex="-1"></a>}</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:seedat"></span>
<img src="16-ExercisesSurvival_files/figure-html/seedat-1.png" alt="Visualisation of the capture-recapture/resighting data. Each horizontal line connect capture or resightings of the same individual, a circle indicate that the individual is captured or resighted at least once during that year." width="672" />
<p class="caption">
Figure 17.1: Visualisation of the capture-recapture/resighting data. Each horizontal line connect capture or resightings of the same individual, a circle indicate that the individual is captured or resighted at least once during that year.
</p>
</div>
<p>Model description:</p>
<p>The observations <span class="math inline">\(y_{it}\)</span>, an indicator of whether individual <span class="math inline">\(i\)</span> was recaptured or resighted during year <span class="math inline">\(t\)</span> is modeled conditional on the latent true state of the individual birds <span class="math inline">\(z_{it}\)</span> (0 = dead or permanently emigrated, 1 = alive and at the study site) as a Bernoulli variable. The probability <span class="math inline">\(P(y_{it} = 1)\)</span> is the product of the probability that an alive individual is recaptured or resighted, <span class="math inline">\(p_{it}\)</span>, and the state of the bird <span class="math inline">\(z_{it}\)</span> (alive = 1, dead = 0). Thus, a dead bird cannot be recaptured or resighted, whereas for a bird alive during year <span class="math inline">\(t\)</span>, the recapture/resighting probability equals <span class="math inline">\(p_{it}\)</span>:
<span class="math display">\[y_{it} \sim Bernoulli(z_{it}p_{it})\]</span>
The latent state variable <span class="math inline">\(z_{it}\)</span> is a Markovian variable with the state at year <span class="math inline">\(t\)</span> being dependent on the state at year <span class="math inline">\(t-1\)</span> and the apparent survival probability <span class="math inline">\(\phi_{it}\)</span>:
<span class="math display">\[z_{it} \sim Bernoulli(z_{it-1}\phi_{it})\]</span></p>
<p>We use the notation <span class="math inline">\(\phi\)</span> to indicate that this parameter can be interpreted as apparent survival rather than true survival of which the standard notation would be <span class="math inline">\(S\)</span> <span class="citation">(<a href="#ref-Thomson.2009d">D. L. Thomson et al. 2009</a>)</span>.
We model <span class="math inline">\(\phi\)</span> dependent on age (1=first year, 2=older) and year.</p>
<p><span class="math display">\[\phi_{it} = \alpha_{age-class[it], t} \]</span></p>
<p>Annual recapture/resighting probability is modeled for each year independently:
<span class="math display">\[p_{it} = \beta_{t}\]</span>
We use uniform prior distributions for all parameters with a parameter space limited to values between 0 and 1 (probabilities), <span class="math inline">\(\alpha_{age-class,t} \sim uniform(0,1)\)</span> and <span class="math inline">\(\beta_t \sim uniform(0,1)\)</span>.</p>
<p>We use Markov chain Monte Carlo simulations as implemented in jags <span class="citation">(<a href="#ref-Plummer2003">Plummer 2003</a>)</span> to fit the model to the data. For doing so, we first need to specify the model using Jags language. We do that in a separate text-file (jags/cjs.txt).</p>
<p>To fit the model, the <a href="https://sourceforge.net/projects/mcmc-jags/files/">Software jags</a> need to be downloaded and installed.</p>
<pre><code>## ## jags model code
## model{
##   ## likelihood
##   for(i in 1:nind){
##     z[i,first[i]]  &lt;- 1
##     for(t in (first[i]+1):nocc) {
##       phiz[i, t-1] &lt;- z[i,t-1]*phi[i, t-1]
##       z[i,t] ~ dbern(phiz[i, t-1])
##       zp[i,t] &lt;- z[i,t]*p[i,t-1]
##       y[i,t] ~ dbern(zp[i,t])
##     }
##   }
## 
##   ## linear predictors
##   for(i in 1:nind){
##     for(t in first[i]:(nocc-1)){
##       phi[i,t] &lt;-  a[age[i,t],t]
##       p[i,t] &lt;-  b[t]
##     }
##   }
## 
##   ## priors
##  for(t in 1:(nocc-1)){
##   b[t] ~ dunif(0, 1)
##   a[1,t] ~ dunif(0, 1)
##   a[2,t] ~ dunif(0, 1)
## 
##  }
## }</code></pre>
<p>After having specified the model, we need to bundle the data into a list. We have prepared that list in the object <code>datax</code>.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="exSurvest.html#cb44-1" tabindex="-1"></a><span class="fu">str</span>(datax)</span>
<span id="cb44-2"><a href="exSurvest.html#cb44-2" tabindex="-1"></a><span class="do">## List of 5</span></span>
<span id="cb44-3"><a href="exSurvest.html#cb44-3" tabindex="-1"></a><span class="do">##  $ y    : &#39;table&#39; num [1:1310, 1:9] 0 1 1 1 1 1 1 1 1 1 ...</span></span>
<span id="cb44-4"><a href="exSurvest.html#cb44-4" tabindex="-1"></a><span class="do">##  $ first: int [1:1310] 8 1 1 1 1 1 1 1 1 1 ...</span></span>
<span id="cb44-5"><a href="exSurvest.html#cb44-5" tabindex="-1"></a><span class="do">##  $ age  : num [1:1310, 1:9] NA 2 2 1 1 1 1 2 1 1 ...</span></span>
<span id="cb44-6"><a href="exSurvest.html#cb44-6" tabindex="-1"></a><span class="do">##  $ nind : int 1310</span></span>
<span id="cb44-7"><a href="exSurvest.html#cb44-7" tabindex="-1"></a><span class="do">##  $ nocc : int 9</span></span></code></pre></div>
<p>We then need to specify initial values and the parameters that we would like to save.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="exSurvest.html#cb45-1" tabindex="-1"></a><span class="fu">library</span>(R2jags)</span></code></pre></div>
<pre><code>## Lade nötiges Paket: rjags</code></pre>
<pre><code>## Lade nötiges Paket: coda</code></pre>
<pre><code>## Linked to JAGS 4.3.1</code></pre>
<pre><code>## Loaded modules: basemod,bugs</code></pre>
<pre><code>## 
## Attache Paket: &#39;R2jags&#39;</code></pre>
<pre><code>## Das folgende Objekt ist maskiert &#39;package:coda&#39;:
## 
##     traceplot</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="exSurvest.html#cb52-1" tabindex="-1"></a>initz <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="cn">NA</span>, <span class="at">ncol=</span>datax<span class="sc">$</span>nocc, <span class="at">nrow=</span>datax<span class="sc">$</span>nind)</span>
<span id="cb52-2"><a href="exSurvest.html#cb52-2" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>datax<span class="sc">$</span>nind) initz[i,(datax<span class="sc">$</span>first[i]<span class="sc">+</span><span class="dv">1</span>)<span class="sc">:</span>datax<span class="sc">$</span>nocc] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb52-3"><a href="exSurvest.html#cb52-3" tabindex="-1"></a>initfun <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb52-4"><a href="exSurvest.html#cb52-4" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">a=</span><span class="fu">matrix</span>(<span class="fu">runif</span>(<span class="dv">2</span><span class="sc">*</span>(datax<span class="sc">$</span>nocc<span class="dv">-1</span>), <span class="dv">0</span>,<span class="dv">1</span>), <span class="at">ncol=</span>datax<span class="sc">$</span>nocc<span class="dv">-1</span>, <span class="at">nrow=</span><span class="dv">2</span>),</span>
<span id="cb52-5"><a href="exSurvest.html#cb52-5" tabindex="-1"></a>       <span class="at">b=</span><span class="fu">runif</span>(datax<span class="sc">$</span>nocc<span class="dv">-1</span>, <span class="dv">0</span>,<span class="dv">1</span>),</span>
<span id="cb52-6"><a href="exSurvest.html#cb52-6" tabindex="-1"></a>       <span class="at">z=</span>initz)</span>
<span id="cb52-7"><a href="exSurvest.html#cb52-7" tabindex="-1"></a>}</span>
<span id="cb52-8"><a href="exSurvest.html#cb52-8" tabindex="-1"></a></span>
<span id="cb52-9"><a href="exSurvest.html#cb52-9" tabindex="-1"></a></span>
<span id="cb52-10"><a href="exSurvest.html#cb52-10" tabindex="-1"></a>parameters <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>)</span>
<span id="cb52-11"><a href="exSurvest.html#cb52-11" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">jags</span>(datax, <span class="at">inits=</span>initfun, <span class="at">parameters.to.save=</span>parameters, </span>
<span id="cb52-12"><a href="exSurvest.html#cb52-12" tabindex="-1"></a>            <span class="at">model.file=</span><span class="st">&quot;jags/cjs.txt&quot;</span>, <span class="at">n.chains=</span><span class="dv">3</span>, <span class="at">n.iter=</span><span class="dv">2000</span>)</span></code></pre></div>
<pre><code>## module glm loaded</code></pre>
<pre><code>## Compiling model graph
##    Resolving undeclared variables
##    Allocating nodes
## Graph information:
##    Observed stochastic nodes: 3726
##    Unobserved stochastic nodes: 3750
##    Total graph size: 28048
## 
## Initializing model</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="exSurvest.html#cb55-1" tabindex="-1"></a>mod <span class="ot">&lt;-</span> mod<span class="sc">$</span>BUGSoutput</span></code></pre></div>
<p>Before we look at the results, we check how well the Markov chains converged. The chains look ok except for the parameters of the last year. For the last year, apparent survival cannot be separated from recapture/resighting probability. Thus, we must expect that these chains do not converge well.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="exSurvest.html#cb56-1" tabindex="-1"></a><span class="co"># check </span></span>
<span id="cb56-2"><a href="exSurvest.html#cb56-2" tabindex="-1"></a><span class="fu">traceplot</span>(mod)</span></code></pre></div>
<p>In the Cormack-Jolly-Seber model, for the last occasion, only the product of survival and recapture probability is estimable. Therefore, for these two parameters, it does not look like the Markov chains have converged.</p>
<p>We then look at the results</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="exSurvest.html#cb57-1" tabindex="-1"></a>mod<span class="sc">$</span>summary</span>
<span id="cb57-2"><a href="exSurvest.html#cb57-2" tabindex="-1"></a><span class="do">##                  mean           sd         2.5%          25%          50%</span></span>
<span id="cb57-3"><a href="exSurvest.html#cb57-3" tabindex="-1"></a><span class="do">## a[1,1]   3.579081e-01   0.14690512 1.410704e-01 2.498345e-01 3.368257e-01</span></span>
<span id="cb57-4"><a href="exSurvest.html#cb57-4" tabindex="-1"></a><span class="do">## a[2,1]   3.607773e-01   0.19013937 7.155267e-02 2.215566e-01 3.312382e-01</span></span>
<span id="cb57-5"><a href="exSurvest.html#cb57-5" tabindex="-1"></a><span class="do">## a[1,2]   3.967045e-01   0.13546861 1.703012e-01 2.982915e-01 3.857385e-01</span></span>
<span id="cb57-6"><a href="exSurvest.html#cb57-6" tabindex="-1"></a><span class="do">## a[2,2]   5.551238e-01   0.13603812 3.006965e-01 4.610919e-01 5.469994e-01</span></span>
<span id="cb57-7"><a href="exSurvest.html#cb57-7" tabindex="-1"></a><span class="do">## a[1,3]   5.100021e-02   0.04867985 1.420998e-03 1.504552e-02 3.623942e-02</span></span>
<span id="cb57-8"><a href="exSurvest.html#cb57-8" tabindex="-1"></a><span class="do">## a[2,3]   8.033179e-01   0.12544301 5.262155e-01 7.237607e-01 8.165390e-01</span></span>
<span id="cb57-9"><a href="exSurvest.html#cb57-9" tabindex="-1"></a><span class="do">## a[1,4]   1.741888e-01   0.10710407 2.232044e-02 9.282719e-02 1.568486e-01</span></span>
<span id="cb57-10"><a href="exSurvest.html#cb57-10" tabindex="-1"></a><span class="do">## a[2,4]   5.192312e-01   0.05344142 4.177423e-01 4.813643e-01 5.182136e-01</span></span>
<span id="cb57-11"><a href="exSurvest.html#cb57-11" tabindex="-1"></a><span class="do">## a[1,5]   3.942740e-01   0.13974363 1.468773e-01 2.947123e-01 3.816240e-01</span></span>
<span id="cb57-12"><a href="exSurvest.html#cb57-12" tabindex="-1"></a><span class="do">## a[2,5]   7.320493e-01   0.06162039 6.110721e-01 6.907536e-01 7.326188e-01</span></span>
<span id="cb57-13"><a href="exSurvest.html#cb57-13" tabindex="-1"></a><span class="do">## a[1,6]   1.343465e-01   0.06182839 4.019983e-02 8.742291e-02 1.259538e-01</span></span>
<span id="cb57-14"><a href="exSurvest.html#cb57-14" tabindex="-1"></a><span class="do">## a[2,6]   5.945003e-01   0.03154709 5.344815e-01 5.722535e-01 5.944587e-01</span></span>
<span id="cb57-15"><a href="exSurvest.html#cb57-15" tabindex="-1"></a><span class="do">## a[1,7]   8.917291e-02   0.08010705 3.386082e-03 2.861685e-02 6.684616e-02</span></span>
<span id="cb57-16"><a href="exSurvest.html#cb57-16" tabindex="-1"></a><span class="do">## a[2,7]   4.571114e-01   0.02717100 4.060070e-01 4.384032e-01 4.567562e-01</span></span>
<span id="cb57-17"><a href="exSurvest.html#cb57-17" tabindex="-1"></a><span class="do">## a[1,8]   4.929300e-02   0.04996788 1.080848e-03 1.289218e-02 3.309377e-02</span></span>
<span id="cb57-18"><a href="exSurvest.html#cb57-18" tabindex="-1"></a><span class="do">## a[2,8]   8.119526e-01   0.15476080 4.470991e-01 7.215140e-01 8.503444e-01</span></span>
<span id="cb57-19"><a href="exSurvest.html#cb57-19" tabindex="-1"></a><span class="do">## b[1]     4.001837e-01   0.15831648 1.360035e-01 2.819253e-01 3.839743e-01</span></span>
<span id="cb57-20"><a href="exSurvest.html#cb57-20" tabindex="-1"></a><span class="do">## b[2]     4.040775e-01   0.10735693 2.164360e-01 3.259480e-01 3.993803e-01</span></span>
<span id="cb57-21"><a href="exSurvest.html#cb57-21" tabindex="-1"></a><span class="do">## b[3]     5.720286e-01   0.11275205 3.542655e-01 4.966435e-01 5.685720e-01</span></span>
<span id="cb57-22"><a href="exSurvest.html#cb57-22" tabindex="-1"></a><span class="do">## b[4]     7.183799e-01   0.06549556 5.876554e-01 6.738292e-01 7.212406e-01</span></span>
<span id="cb57-23"><a href="exSurvest.html#cb57-23" tabindex="-1"></a><span class="do">## b[5]     6.390186e-01   0.06014063 5.208697e-01 5.987511e-01 6.400187e-01</span></span>
<span id="cb57-24"><a href="exSurvest.html#cb57-24" tabindex="-1"></a><span class="do">## b[6]     8.808501e-01   0.03358445 8.063861e-01 8.603508e-01 8.840353e-01</span></span>
<span id="cb57-25"><a href="exSurvest.html#cb57-25" tabindex="-1"></a><span class="do">## b[7]     7.235990e-01   0.03900797 6.435485e-01 6.962633e-01 7.260461e-01</span></span>
<span id="cb57-26"><a href="exSurvest.html#cb57-26" tabindex="-1"></a><span class="do">## b[8]     5.559018e-01   0.13932289 4.056274e-01 4.578523e-01 5.123155e-01</span></span>
<span id="cb57-27"><a href="exSurvest.html#cb57-27" tabindex="-1"></a><span class="do">## deviance 1.387413e+03 172.04391369 9.187164e+02 1.310614e+03 1.432749e+03</span></span>
<span id="cb57-28"><a href="exSurvest.html#cb57-28" tabindex="-1"></a><span class="do">##                   75%        97.5%     Rhat n.eff</span></span>
<span id="cb57-29"><a href="exSurvest.html#cb57-29" tabindex="-1"></a><span class="do">## a[1,1]   4.383729e-01    0.7196800 1.001172  3000</span></span>
<span id="cb57-30"><a href="exSurvest.html#cb57-30" tabindex="-1"></a><span class="do">## a[2,1]   4.697703e-01    0.8029691 1.001262  2600</span></span>
<span id="cb57-31"><a href="exSurvest.html#cb57-31" tabindex="-1"></a><span class="do">## a[1,2]   4.827166e-01    0.6990534 1.004566   520</span></span>
<span id="cb57-32"><a href="exSurvest.html#cb57-32" tabindex="-1"></a><span class="do">## a[2,2]   6.460949e-01    0.8333966 1.006390   490</span></span>
<span id="cb57-33"><a href="exSurvest.html#cb57-33" tabindex="-1"></a><span class="do">## a[1,3]   7.267660e-02    0.1821528 1.002351  1100</span></span>
<span id="cb57-34"><a href="exSurvest.html#cb57-34" tabindex="-1"></a><span class="do">## a[2,3]   9.030432e-01    0.9897416 1.007036   410</span></span>
<span id="cb57-35"><a href="exSurvest.html#cb57-35" tabindex="-1"></a><span class="do">## a[1,4]   2.342415e-01    0.4243667 1.001311  2500</span></span>
<span id="cb57-36"><a href="exSurvest.html#cb57-36" tabindex="-1"></a><span class="do">## a[2,4]   5.564189e-01    0.6218842 1.003612   640</span></span>
<span id="cb57-37"><a href="exSurvest.html#cb57-37" tabindex="-1"></a><span class="do">## a[1,5]   4.874236e-01    0.6909952 1.000696  3000</span></span>
<span id="cb57-38"><a href="exSurvest.html#cb57-38" tabindex="-1"></a><span class="do">## a[2,5]   7.720097e-01    0.8535823 1.001950  1400</span></span>
<span id="cb57-39"><a href="exSurvest.html#cb57-39" tabindex="-1"></a><span class="do">## a[1,6]   1.727651e-01    0.2697558 1.001443  2100</span></span>
<span id="cb57-40"><a href="exSurvest.html#cb57-40" tabindex="-1"></a><span class="do">## a[2,6]   6.150834e-01    0.6573950 1.005546   410</span></span>
<span id="cb57-41"><a href="exSurvest.html#cb57-41" tabindex="-1"></a><span class="do">## a[1,7]   1.268869e-01    0.3055715 1.002201  3000</span></span>
<span id="cb57-42"><a href="exSurvest.html#cb57-42" tabindex="-1"></a><span class="do">## a[2,7]   4.746235e-01    0.5129423 1.002068  1800</span></span>
<span id="cb57-43"><a href="exSurvest.html#cb57-43" tabindex="-1"></a><span class="do">## a[1,8]   6.879095e-02    0.1820264 1.002156  1200</span></span>
<span id="cb57-44"><a href="exSurvest.html#cb57-44" tabindex="-1"></a><span class="do">## a[2,8]   9.401938e-01    0.9950865 1.047934   180</span></span>
<span id="cb57-45"><a href="exSurvest.html#cb57-45" tabindex="-1"></a><span class="do">## b[1]     5.039640e-01    0.7355364 1.001768  1900</span></span>
<span id="cb57-46"><a href="exSurvest.html#cb57-46" tabindex="-1"></a><span class="do">## b[2]     4.762941e-01    0.6254877 1.005170   430</span></span>
<span id="cb57-47"><a href="exSurvest.html#cb57-47" tabindex="-1"></a><span class="do">## b[3]     6.515733e-01    0.8002085 1.000628  3000</span></span>
<span id="cb57-48"><a href="exSurvest.html#cb57-48" tabindex="-1"></a><span class="do">## b[4]     7.646688e-01    0.8404250 1.000649  3000</span></span>
<span id="cb57-49"><a href="exSurvest.html#cb57-49" tabindex="-1"></a><span class="do">## b[5]     6.805832e-01    0.7527484 1.001343  2400</span></span>
<span id="cb57-50"><a href="exSurvest.html#cb57-50" tabindex="-1"></a><span class="do">## b[6]     9.051555e-01    0.9381220 1.010905   310</span></span>
<span id="cb57-51"><a href="exSurvest.html#cb57-51" tabindex="-1"></a><span class="do">## b[7]     7.512913e-01    0.7966394 1.004152  3000</span></span>
<span id="cb57-52"><a href="exSurvest.html#cb57-52" tabindex="-1"></a><span class="do">## b[8]     6.046360e-01    0.9513437 1.039273   200</span></span>
<span id="cb57-53"><a href="exSurvest.html#cb57-53" tabindex="-1"></a><span class="do">## deviance 1.504601e+03 1612.9255318 1.065042    89</span></span></code></pre></div>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="exSurvest.html#cb58-1" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">c</span>(<span class="dv">2015</span>,<span class="dv">2023</span>), <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>), <span class="at">type=</span><span class="st">&quot;n&quot;</span>, <span class="at">las=</span><span class="dv">1</span>, <span class="at">xlab=</span><span class="cn">NA</span>, <span class="at">ylab=</span><span class="st">&quot;Apparent survival&quot;</span>)</span>
<span id="cb58-2"><a href="exSurvest.html#cb58-2" tabindex="-1"></a></span>
<span id="cb58-3"><a href="exSurvest.html#cb58-3" tabindex="-1"></a>phi <span class="ot">&lt;-</span> <span class="fu">apply</span>(mod<span class="sc">$</span>sims.list<span class="sc">$</span>a, <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>), mean)</span>
<span id="cb58-4"><a href="exSurvest.html#cb58-4" tabindex="-1"></a>phi.lwr <span class="ot">&lt;-</span> <span class="fu">apply</span>(mod<span class="sc">$</span>sims.list<span class="sc">$</span>a, <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>), quantile, <span class="at">probs=</span><span class="fl">0.025</span>)</span>
<span id="cb58-5"><a href="exSurvest.html#cb58-5" tabindex="-1"></a>phi.upr <span class="ot">&lt;-</span> <span class="fu">apply</span>(mod<span class="sc">$</span>sims.list<span class="sc">$</span>a, <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>), quantile, <span class="at">probs=</span><span class="fl">0.975</span>)</span>
<span id="cb58-6"><a href="exSurvest.html#cb58-6" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fl">2015.5</span>, <span class="fl">2022.5</span>, <span class="at">by=</span><span class="dv">1</span>)</span>
<span id="cb58-7"><a href="exSurvest.html#cb58-7" tabindex="-1"></a><span class="fu">segments</span>(x, phi.lwr[<span class="dv">1</span>,], x,phi.upr[<span class="dv">1</span>,])</span>
<span id="cb58-8"><a href="exSurvest.html#cb58-8" tabindex="-1"></a><span class="fu">points</span>(x, phi[<span class="dv">1</span>,], <span class="at">pch=</span><span class="dv">21</span>, <span class="at">bg=</span><span class="st">&quot;white&quot;</span>)</span>
<span id="cb58-9"><a href="exSurvest.html#cb58-9" tabindex="-1"></a><span class="fu">segments</span>(x<span class="fl">+0.1</span>, phi.lwr[<span class="dv">2</span>,], x<span class="fl">+0.1</span>,phi.upr[<span class="dv">2</span>,], <span class="at">lwd=</span><span class="dv">2</span>, <span class="at">col=</span><span class="st">&quot;brown&quot;</span>)</span>
<span id="cb58-10"><a href="exSurvest.html#cb58-10" tabindex="-1"></a><span class="fu">points</span>(x<span class="fl">+0.1</span>, phi[<span class="dv">2</span>,], <span class="at">pch=</span><span class="dv">21</span>, <span class="at">bg=</span><span class="st">&quot;white&quot;</span>, <span class="at">col=</span><span class="st">&quot;brown&quot;</span>)</span>
<span id="cb58-11"><a href="exSurvest.html#cb58-11" tabindex="-1"></a><span class="fu">legend</span>(<span class="dv">2015</span>, <span class="fl">1.1</span>, <span class="at">xpd=</span><span class="cn">NA</span>, <span class="at">lwd=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="at">col=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="st">&quot;brown&quot;</span>), <span class="at">legend=</span><span class="fu">c</span>(<span class="st">&quot;first year&quot;</span>, <span class="st">&quot;adult&quot;</span>), <span class="at">horiz=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-4"></span>
<img src="16-ExercisesSurvival_files/figure-html/unnamed-chunk-4-1.png" alt="Annual apparent survival of juvenile and adult Snowfinches." width="672" />
<p class="caption">
Figure 17.2: Annual apparent survival of juvenile and adult Snowfinches.
</p>
</div>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="exSurvest.html#cb59-1" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">c</span>(<span class="dv">2016</span>,<span class="dv">2023</span>), <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>), <span class="at">type=</span><span class="st">&quot;n&quot;</span>, <span class="at">las=</span><span class="dv">1</span>, <span class="at">xlab=</span><span class="cn">NA</span>, <span class="at">ylab=</span><span class="st">&quot;Recapture/resighting probability&quot;</span>)</span>
<span id="cb59-2"><a href="exSurvest.html#cb59-2" tabindex="-1"></a></span>
<span id="cb59-3"><a href="exSurvest.html#cb59-3" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">apply</span>(mod<span class="sc">$</span>sims.list<span class="sc">$</span>b, <span class="dv">2</span>, mean)</span>
<span id="cb59-4"><a href="exSurvest.html#cb59-4" tabindex="-1"></a>p.lwr <span class="ot">&lt;-</span> <span class="fu">apply</span>(mod<span class="sc">$</span>sims.list<span class="sc">$</span>b, <span class="dv">2</span>, quantile, <span class="at">probs=</span><span class="fl">0.025</span>)</span>
<span id="cb59-5"><a href="exSurvest.html#cb59-5" tabindex="-1"></a>p.upr <span class="ot">&lt;-</span> <span class="fu">apply</span>(mod<span class="sc">$</span>sims.list<span class="sc">$</span>b, <span class="dv">2</span>, quantile, <span class="at">probs=</span><span class="fl">0.975</span>)</span>
<span id="cb59-6"><a href="exSurvest.html#cb59-6" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">2016</span>, <span class="dv">2023</span>, <span class="at">by=</span><span class="dv">1</span>)</span>
<span id="cb59-7"><a href="exSurvest.html#cb59-7" tabindex="-1"></a><span class="fu">segments</span>(x, p.lwr, x,p.upr, <span class="at">lwd=</span><span class="dv">2</span>, <span class="at">col=</span><span class="st">&quot;brown&quot;</span>)</span>
<span id="cb59-8"><a href="exSurvest.html#cb59-8" tabindex="-1"></a><span class="fu">points</span>(x, p, <span class="at">pch=</span><span class="dv">21</span>, <span class="at">bg=</span><span class="st">&quot;white&quot;</span>, <span class="at">col=</span><span class="st">&quot;brown&quot;</span>)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-5"></span>
<img src="16-ExercisesSurvival_files/figure-html/unnamed-chunk-5-1.png" alt="Recapture and resighting probability" width="672" />
<p class="caption">
Figure 17.3: Recapture and resighting probability
</p>
</div>
<p><span class="citation">Kéry and Schaub (<a href="#ref-Kery.2012">2012</a>)</span> wrote a gentle introduction to mark-recapture modelling for biologists. An example using Stan is found here <a href="https://tobiasroth.github.io/BDAEcology/cjs_with_mix.html" class="uri">https://tobiasroth.github.io/BDAEcology/cjs_with_mix.html</a>.</p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-Cormack.1964" class="csl-entry">
Cormack, R. M. 1964. <span>“Estimates of Survival from the Sighting of Marked Animals.”</span> <em>Biometrika</em> 51: 429–38.
</div>
<div id="ref-Jolly.1965" class="csl-entry">
Jolly, G. 1965. <span>“Explicit Estimates from Capture-Recapture Data with Both Death and Immigration-Stochastic Model.”</span> <em>Biometrika</em> 52: 225–47.
</div>
<div id="ref-Kery.2012" class="csl-entry">
Kéry, Marc, and Michael Schaub. 2012. <em>Bayesian Population Analysis Using WinBUGS</em>. Amsterdam: Elsevier.
</div>
<div id="ref-Plummer2003" class="csl-entry">
Plummer, Martyn. 2003. <span>“<span class="nocase">JAGS : A Program for Analysis of Bayesian Graphical Models Using Gibbs Sampling JAGS : Just Another Gibbs Sampler</span>.”</span> In <em>Proceedings of the 3rd International Workshop on Distributed Statistical Computing</em>, edited by K. Hornik, F. Leisch, and A. Zeileis, 1–8. Dsc. Vienna.
</div>
<div id="ref-Seber.1965" class="csl-entry">
Seber, G. A. F. 1965. <span>“A Note on the Multiple-Recapture Census.”</span> <em>Biometrika</em> 52: 249–59.
</div>
<div id="ref-Thomson.2009d" class="csl-entry">
Thomson, D L, M J Conroy, D R Anderson, K P Burnham, E G Cooch, C M Francis, J.-D. Lebreton, et al. 2009. <span>“Standardising Terminology and Notation for the Analysis of Demographic Processes in Marked Populations.”</span> Edited by D L Thomson, E G Cooch, and M J Conroy. <em>Modeling Demographic Processes in Marked Populations</em>, 1099–1106.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="exctiming.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="excmigmodel.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["MigrationCourse.pdf", "MigrationCourse.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
